<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>RepoDisplayerJS - Projects | magarenzo.com</title>
    <meta charset="UTF-8">
    <meta property="og:image" content="/images/headshot-square.jpg">
    <meta name="description" content="Fetch repositories listed on a GitHub user's profile and display them via HTML">
    <meta name="keywords" content="programming, coding, development, engineering">
    <meta name="author" content="Michael A. Agarenzo">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, minimum-scale=1, maximum-scale=1">
    <link rel="icon" href="/images/headshot-circle.png">

    <style>
        a {
            text-decoration: none;
        }
    </style>
</head>

<body onload="repoDisplayer('projects')">
    <h1>RepoDisplayerJS</h1>
    <p><iframe src="https://ghbtns.com/github-btn.html?user=magarenzo&repo=RepoDisplayerJS&type=star&count=true&size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe></p>
    <hr>

    <div id="projects"></div>

    <hr>
    <p><a href="https://magarenzo.com">magarenzo.com</a></p>

    <script>
        function repoDisplayer(id) {
            const profileName = "magarenzo";
            const includedProjects = ["magarenzo.github.io", "RepoDisplayerJS"];
            const errorString = "<p>Check out all of my projects <a href='https://github.com/" + profileName + "?tab=repositories' target='_blank'>here</a> on my GitHub profile</p>";
            const div = document.getElementById(id);
            if (div) {
                fetch("https://api.github.com/users/" + profileName + "/repos").then((response) => {
                    if (response.status != 200) {
                        div.innerHTML += errorString;
                    }
                    return response.json()
                }).then((jsonObject) => {
                    for (var key in jsonObject) {
                        if (jsonObject[key].name &&
                            jsonObject[key].html_url &&
                            jsonObject[key].description &&
                            jsonObject[key].language) {
                            var name = JSON.stringify(jsonObject[key].name).split('"').join("");
                            if (includedProjects.includes(name)) {
                                var url = JSON.stringify(jsonObject[key].html_url).split('"').join("");
                                var description = JSON.stringify(jsonObject[key].description).split('"').join("");
                                var language = JSON.stringify(jsonObject[key].language).split('"').join("");
                                div.innerHTML += "<h3><a href='" + url + "' target='_blank'>" + name + "</a></h3>";
                                div.innerHTML += "<p><em>" + description + "</em>. <strong>" + language + "</strong>.</p>";
                            }
                        }
                    }
                }).catch(function() {
                    div.innerHTML += errorString;
                });
            }
        }
    </script>
</body>

</html>